{"ast":null,"code":"import _toConsumableArray from\"/workspaces/Dex/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/workspaces/Dex/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/workspaces/Dex/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/workspaces/Dex/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState}from'react';import{BrowserView}from'react-device-detect';import LeftNavbar from'../../components/LeftNavbar';import SearchBar from'../../components/SearchBar';import{Collapse,Alert,AlertTitle}from'@mui/material';import{fetchWhaleTrades}from'../../api/getTransactions';import NoLogo from'../../assets/n0n3.png';import Etherscan from'../../assets/etherscan-logo.webp';import CopyText from'../../components/CopyText';// Import DEX logos\nimport uniswap from'../../assets/dex/uniswap.svg';import balancer from'../../assets/dex/balancer.svg';import inch from'../../assets/dex/1inch.svg';import kyber from'../../assets/dex/kyberswap.svg';import sushiswap from'../../assets/dex/sushiswap.svg';import zrx from'../../assets/dex/zerox_exchange.svg';import pancakeswap from'../../assets/dex/pancakeswap.svg';import curve from'../../assets/dex/curve.svg';import SmallLoading from'../../components/SmallLoading';// Define logo mapping\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var dexLogoMap={uniswap:uniswap,balancer:balancer,\"1inch\":inch,kyber:kyber,sushiswap:sushiswap,\"Zerox Exchange\":zrx,pancakeswap:pancakeswap,curve:curve};var chains=['Ethereum','Binance Smart Chain','Polygon','Arbitrum'];var tradeSizes=['10000','50000','100000','500000','1000000'];export default function WhaleTrackerPage(props){var theme=props.theme,mobile=props.mobile;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),honeypot=_useState2[0],setHoneypot=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isNavbarOpen=_useState4[0],setIsNavbarOpen=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),dexTrades=_useState6[0],setDexTrades=_useState6[1];var _useState7=useState('timeInterval.minute'),_useState8=_slicedToArray(_useState7,2),sortBy=_useState8[0],setSortBy=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isDropdownOpen=_useState10[0],setIsDropdownOpen=_useState10[1];var _useState11=useState('10000'),_useState12=_slicedToArray(_useState11,2),selectedTradeSize=_useState12[0],setSelectedTradeSize=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),showRelativeTime=_useState14[0],setShowRelativeTime=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),isFetching=_useState16[0],setIsFetching=_useState16[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var trades;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetchWhaleTrades();case 2:trades=_context.sent;setDexTrades(trades);setIsFetching(false);case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);// Sorting logic\nuseEffect(function(){var sortedTrades=_toConsumableArray(dexTrades);if(sortBy==='timeInterval.minute'){sortedTrades.sort(function(a,b){return new Date(b.timeInterval.minute).getTime()-new Date(a.timeInterval.minute).getTime();});}else if(sortBy==='tradeAmount'){sortedTrades.sort(function(a,b){return b.tradeAmount-a.tradeAmount;});}setDexTrades(sortedTrades);},[sortBy]);var filteredTrades=dexTrades.filter(function(trade){return trade.tradeAmount>=Number(selectedTradeSize);});var formatNumber=function formatNumber(num){if(num<1000){return num.toFixed(2);}else if(num>=1000&&num<1000000){return\"\".concat((num/1000).toFixed(0),\"K\");}else if(num>=1000000){return\"\".concat((num/1000000).toFixed(1),\"M\");}return num.toString();};// Get the DEX logo based on the exchange name\nvar getDexLogo=function getDexLogo(dexName){var lowerDexName=dexName.toLowerCase();var matchedKey=Object.keys(dexLogoMap).find(function(key){return lowerDexName.includes(key);});return matchedKey?dexLogoMap[matchedKey]:NoLogo;};var getRelativeTime=function getRelativeTime(dateString){var now=new Date();var tradeDate=new Date(dateString);var diffMs=now.getTime()-tradeDate.getTime();var seconds=Math.floor(diffMs/1000);var minutes=Math.floor(seconds/60);var hours=Math.floor(minutes/60);var days=Math.floor(hours/24);var months=Math.floor(days/30);if(months>0)return\"\".concat(months,\" month\").concat(months>1?'s':'');if(days>0)return\"\".concat(days,\" day\").concat(days>1?'s':'');if(hours>0)return\"\".concat(hours,\" hour\").concat(hours>1?'s':'');if(minutes>0)return\"\".concat(minutes,\" minute\").concat(minutes>1?'s':'');return\"\".concat(seconds,\" second\").concat(seconds>1?'s':'');};// Format time based on the toggle state\nvar formatTime=function formatTime(date){var tradeDate=new Date(date);// If showRelativeTime is false, format as \"25 Nov, 01:51 AM\"\nvar options={weekday:'short',day:'numeric',month:'short',hour:'2-digit',minute:'2-digit',hour12:true};return showRelativeTime?getRelativeTime(date):tradeDate.toLocaleString('en-GB',options).replace(',','');};return/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen max-h-screen text-white\",children:[/*#__PURE__*/_jsx(BrowserView,{children:/*#__PURE__*/_jsx(LeftNavbar,{onToggle:function onToggle(open){return setIsNavbarOpen(open);}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(isNavbarOpen?'ml-56':'ml-[65px]'),children:[/*#__PURE__*/_jsx(Collapse,{in:honeypot,children:/*#__PURE__*/_jsxs(Alert,{severity:\"error\",onClose:function onClose(){return setHoneypot(false);},children:[/*#__PURE__*/_jsx(AlertTitle,{children:\"Honeypot Detected\"}),\"Do not send any funds to this address.\"]})}),/*#__PURE__*/_jsx(SearchBar,{theme:theme}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-1 flex-col px-1.5 pt-1.5 pb-1 md:px-6 md:pb-2 md:pt-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-1 flex-col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tabs bg-light-seedex hidden w-fit px-1 py-1 md:flex\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"h-8 px-4 items-center justify-center font-azeret rounded-none text-sm uppercase font-medium bg-dark-seedex text-seedex\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center gap-1\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-[inherit]\",children:\"Large Trades\"})})}),/*#__PURE__*/_jsx(\"button\",{className:\"h-8 px-4 items-center justify-center font-azeret rounded-none text-sm uppercase font-medium text-seedex\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center gap-1\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-[inherit]\",children:\"Large Trades\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex w-full items-center gap-1.5 md:w-auto md:gap-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative bg-light-seedex\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"border-rebrand-blue font-inter flex h-[34px] w-[10.6rem] flex-1 items-center gap-2 rounded border bg-transparent px-2 text-[13px] capitalize text-white md:h-[42px] md:flex-auto md:border-0\",\"aria-describedby\":\"popup-12\",onClick:function onClick(){return setIsDropdownOpen(!isDropdownOpen);},children:[\"Size ($): \",/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold\",children:[\"> \",selectedTradeSize]}),/*#__PURE__*/_jsx(\"svg\",{stroke:\"currentColor\",fill:\"none\",strokeWidth:2,viewBox:\"0 0 24 24\",strokeLinecap:\"round\",strokeLinejoin:\"round\",className:\"ml-auto transition duration-500\",height:\"1em\",width:\"1em\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"polyline\",{points:\"6 9 12 15 18 9\"})})]}),isDropdownOpen&&/*#__PURE__*/_jsx(\"ul\",{className:\"absolute z-50 mt-1 w-full rounded bg-dark-seedex\",children:tradeSizes.map(function(trade){return/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){setSelectedTradeSize(trade);setIsDropdownOpen(false);},className:\"cursor-pointer px-3 py-2 hover:bg-light-seedex text-[14px]\",children:\"Size >= $\".concat(trade)},trade);})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto max-h-[80vh] mt-2\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full border-collapse border border-fuchsia-950\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-tab-header-seedex sticky -top-[1px] z-10 grid\",children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-center grid grid-cols-[minmax(50px,1.5fr),80px,minmax(80px,1fr),minmax(80px,1fr),minmax(70px,0.9fr),minmax(100px,1fr),80px] md:grid-cols-[1.5fr,80px,1fr,1fr,0.9fr,1fr,80px]\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-sm font-semibold border border-fuchsia-950\",children:\"Token Swapped\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-sm font-semibold border border-fuchsia-950\",children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-sm font-semibold border border-fuchsia-950\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-sm font-semibold border border-fuchsia-950\",children:\"Maker\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-sm font-semibold border border-fuchsia-950 hover:cursor-pointer\",onClick:function onClick(){return setShowRelativeTime(!showRelativeTime);},children:\"Age\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-sm font-semibold border border-fuchsia-950\",children:\"Exchange\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-sm font-semibold border border-fuchsia-950\",children:\"Txn\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{className:\"flex flex-col flex-1\",children:[isFetching&&/*#__PURE__*/_jsx(SmallLoading,{}),filteredTrades.map(function(trade,index){return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:opacity-70 bg-light-seedex transition-colors duration-200 text-center  grid grid-cols-[minmax(50px,1.5fr),80px,minmax(80px,1fr),minmax(80px,1fr),minmax(70px,0.9fr),minmax(100px,1fr),80px] md:grid-cols-[1.5fr,80px,1fr,1fr,0.9fr,1fr,80px]\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 border border-fuchsia-950\",children:/*#__PURE__*/_jsxs(\"a\",{href:\"https://etherscan.io/token/\".concat(trade.baseCurrency.address),target:\"_blank\",rel:\"noopener noreferrer\",className:\"flex items-center gap-1.5 sm:gap-2\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://assets.coincap.io/assets/icons/\".concat(trade.baseCurrency.symbol.toLowerCase(),\"@2x.png\"),alt:trade.baseCurrency.symbol,onError:function onError(e){var imgElement=e.target;imgElement.onerror=null;imgElement.src=NoLogo;},className:\"h-8 w-8 rounded-full border-2 md:h-10 md:w-10 border-fuchsia-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:gap-0.5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"one-line text-[13px] font-bold text-white\",children:trade.baseCurrency.symbol}),/*#__PURE__*/_jsx(CopyText,{text:trade.baseCurrency.address})]}),/*#__PURE__*/_jsx(\"p\",{className:\"one-line text-rebrand-lighter-gray text-[13px]\",children:trade.baseCurrency.name})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 border border-fuchsia-950\",children:trade.tradeType}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-3 border border-fuchsia-950\",children:[\"$\",formatNumber(trade.tradeAmount)]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 border border-fuchsia-950\",children:/*#__PURE__*/_jsxs(\"a\",{href:\"https://etherscan.io/address/\".concat(trade.transaction.txFrom.address),target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-blue-400 hover:underline\",children:[trade.transaction.txFrom.address.substring(0,6),\"...\",trade.transaction.txFrom.address.slice(-5)]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 border border-fuchsia-950\",children:formatTime(trade.timeInterval.minute)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 border border-fuchsia-950\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"img\",{src:getDexLogo(trade.exchange.fullName),alt:trade.exchange.fullName,className:\"h-6 w-6 rounded-full\"}),trade.exchange.fullName]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 border border-fuchsia-950\",children:/*#__PURE__*/_jsx(\"a\",{href:\"https://etherscan.io/tx/\".concat(trade.transaction.hash),target:\"_blank\",rel:\"noopener noreferrer\",className:\"flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"img\",{src:Etherscan,alt:trade.baseCurrency.symbol,onError:function onError(e){var imgElement=e.target;imgElement.onerror=null;imgElement.src=NoLogo;},className:\"h-4 w-4 rounded-full border-2 md:h-5 md:w-5 border-blue-400\"})})})]},index);})]})]})})]})]})]});}","map":null,"metadata":{},"sourceType":"module"}