{"ast":null,"code":"import _asyncToGenerator from\"/workspaces/Dex/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/workspaces/Dex/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/workspaces/Dex/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import _regeneratorRuntime from\"/workspaces/Dex/node_modules/@babel/runtime/regenerator/index.js\";import'./styles.css';import{DataGrid}from'@mui/x-data-grid';import{sortByBuyandSell}from'../../utils/soter';import{commaFormatted,formatDate,formatNumber,shortNumber}from'../../utils/helpers/numberFormat';import{useEffect,useState}from'react';import{getTransactions}from'../../api/getTransactions';import TokenScan from'../TokenScan';import ShortText from'../ShortText';import Cell from'./Cell';import Div from'../SimpleComponents/Div';import'./styles.css';import styled from'styled-components';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NoRowMessage=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  color: #fff;\\n  font-size: 1.4rem;\\n  font-weight: 600;\\n  text-align: center;\\n  margin-top: 20px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n\"])));var TokenTransaction=function TokenTransaction(props){var token=props.token,address=props.address;var chain=window.location.pathname.split('/')[1].split('-')[1];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),transactions=_useState2[0],setTransactions=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];// Added loading state\nvar _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];// Added error state\nvar columns=[{field:'timestamp',headerName:'AGE',flex:1.2,renderCell:function renderCell(params){return/*#__PURE__*/_jsx(Cell,{row:formatDate(params.row.timestamp),type:params.row.type,fontSize:10,nocolor:true});}},{field:'type',headerName:'TYPE',flex:0.5,renderCell:function renderCell(params){return/*#__PURE__*/_jsx(Cell,{row:params.row.type,type:params.row.type});},sortComparator:sortByBuyandSell},{field:'price',headerName:'PRICE',flex:0.8,renderCell:function renderCell(params){return/*#__PURE__*/_jsx(Cell,{row:formatNumber(params.row.price),type:params.row.type});}},{field:'total',headerName:\"Total USD\",flex:1,renderCell:function renderCell(params){return/*#__PURE__*/_jsx(Cell,{row:'$'+commaFormatted(params.row.total),type:params.row.type});}},{field:'amountToken',headerName:\"AMOUNT \".concat(token.symbol),flex:1,renderCell:function renderCell(params){return/*#__PURE__*/_jsx(Cell,{row:shortNumber(params.row.amountToken)+' '+params.row.symbol,type:params.row.type});}},{field:'maker',headerName:'MAKER',flex:1,renderCell:function renderCell(params){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Cell,{row:/*#__PURE__*/_jsx(ShortText,{text:params.row.maker,size:\"big\"}),type:params.row.type}),/*#__PURE__*/_jsx(TokenScan,{address:params.row.transactionAddress,chain:chain})]});}},{field:'maker',headerName:'TXN HASH',flex:1,renderCell:function renderCell(params){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Cell,{row:/*#__PURE__*/_jsx(ShortText,{text:params.row.maker,size:\"big\"}),type:params.row.type}),/*#__PURE__*/_jsx(TokenScan,{address:params.row.transactionAddress,chain:chain})]});}}];var setTransactionsData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var responses;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);// Set loading state to true before fetching\n_context.prev=1;_context.next=4;return getTransactions(address,chain,token);case 4:responses=_context.sent;if(responses.length>0){setTransactions(responses);setError(null);// Clear any previous errors\n}else{setTransactions([]);setError('No transactions found');}_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);setError('Failed to fetch transactions');setTransactions([]);// Clear transactions in case of error\ncase 12:_context.prev=12;setLoading(false);// Set loading state to false once fetching is complete\nreturn _context.finish(12);case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,8,12,15]]);}));return function setTransactionsData(){return _ref.apply(this,arguments);};}();useEffect(function(){setTransactionsData();var interval=setInterval(function(){setTransactionsData();},30000);return function(){return clearInterval(interval);};},[token]);return/*#__PURE__*/_jsx(Div,{className:\"h-full\",children:loading?/*#__PURE__*/_jsx(NoRowMessage,{children:\"Loading transactions...\"})// Show loading message when loading\n:error?/*#__PURE__*/_jsx(NoRowMessage,{children:error})// Show error message if there is an error\n:/*#__PURE__*/_jsx(DataGrid,{rows:transactions,columns:columns,getRowId:function getRowId(row){return row.id;},disableColumnMenu:true,classes:{columnHeaderTitle:'text-md font-bold text-white',columnHeader:'',cell:'text-md text-white bg-white',row:'text-md text-white bg-pink-500',columnSeparator:'!hidden',root:'',overlay:'dataGridOverlay',columnHeaderTitleContainer:'bg-red-500',columnHeaders:'bg-gray-800'},components:{NoRowsOverlay:function NoRowsOverlay(){return/*#__PURE__*/_jsx(NoRowMessage,{children:\"No Transactions Found\"});}// Show no transactions found message\n}})});};export default TokenTransaction;","map":null,"metadata":{},"sourceType":"module"}