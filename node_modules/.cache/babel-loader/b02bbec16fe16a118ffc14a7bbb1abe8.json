{"ast":null,"code":"import _objectSpread from\"/workspaces/Dex/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/workspaces/Dex/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/workspaces/Dex/node_modules/@babel/runtime/regenerator/index.js\";import axios from'axios';import{getPourcentageChangeBetweenTwoNumbers}from'../utils/calculate';import{API,ORIGIN}from'./constants';import{scanHoneypot}from'./honeyPot';export var getInfo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var address,chain,url;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:address=window.location.pathname.split('/')[1].split('-')[0];chain=window.location.pathname.split('/')[1].split('-')[1];url=\"\".concat(API,\"/info?address=\").concat(address,\"&chain=\").concat(chain);return _context2.abrupt(\"return\",axios.get(url).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){var val,publicInfo,honeypot;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:val=res.data.pair;_context.next=3;return getPublicInfo(val.baseToken.address,chain);case 3:publicInfo=_context.sent;_context.next=6;return scanHoneypot(val.pairAddress,chain);case 6:honeypot=_context.sent;return _context.abrupt(\"return\",_objectSpread(_objectSpread({},val),{},{honeypot:{BuyTax:honeypot.simulationResult.buyTax,BuyGas:honeypot.simulationResult.buyGas,SellTax:honeypot.simulationResult.sellTax,SellGas:honeypot.simulationResult.sellGas,isHoneypot:honeypot.honeypotResult.isHoneypot},favourite:false,price:val.priceUsd,pairAddress:val.pairAddress,tokenAddress:val.baseToken.address,symbol:val.baseToken.symbol,name:val.baseToken.name,price5mChange:val.priceChange.m5,price1hChange:val.priceChange.h1,price6hChange:val.priceChange.h6,price24hChange:val.priceChange.h24,mcap:val.fdv,price24h:val.txns.h24,volume24h:val.volume.h24,liquidity:val.liquidity.usd,reserveRef:val.liquidity.quote,creationTime:val.pairCreatedAt,reserve:val.liquidity.base,chain:'ether'},publicInfo));case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}()).catch(function(err){console.log(err);return null;}));case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function getInfo(){return _ref.apply(this,arguments);};}();export var getPublicInfo=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(tokenAddress,chain){var url;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:url=\"\".concat(API,\"/publicInfo?tokenAddress=\").concat(tokenAddress,\"&chain=\").concat(chain);return _context4.abrupt(\"return\",axios.get(url).then(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(res){var val;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:val=res.data.data;console.log(val);return _context3.abrupt(\"return\",{maxSupply:val.metrics.maxSupply,totalSupply:val.metrics.totalSupply,holders:val.metrics.holders,txCount:val.metrics.txCount,description:val.info.description,links:val.links,logo:val.logo?\"https://www.dextools.io/resources/tokens/logos/\".concat(val.logo):null,audit:val.audit});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x4){return _ref4.apply(this,arguments);};}()).catch(function(err){console.log(err);return null;}));case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function getPublicInfo(_x2,_x3){return _ref3.apply(this,arguments);};}();export var checkFavourite=function checkFavourite(address){var favourites=JSON.parse(localStorage.getItem('favourites')||'[]');return favourites.includes(address);};export var addFavourite=function addFavourite(address){var favourites=JSON.parse(localStorage.getItem('favourites')||'[]');favourites.push(address);localStorage.setItem('favourites',JSON.stringify(favourites));};export var removeFavourite=function removeFavourite(address){var favourites=JSON.parse(localStorage.getItem('favourites')||'[]');favourites=favourites.filter(function(f){return f!==address;});localStorage.setItem('favourites',JSON.stringify(favourites));};var getFavourites=function getFavourites(){var favourites=JSON.parse(localStorage.getItem('favourites')||'[]');return favourites;};export var getFavouritesData=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var url;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:url=\"\".concat(API,\"/favourites\");_context5.next=3;return axios.post(url,{favourites:getFavourites()}).then(function(res){return res.data.map(function(val){return{symbol:val.symbol,symbolRef:val.symbolRef,pair:val.id.pair,logo:\"\".concat(ORIGIN,\"/raw?url=https://www.dextools.io/resources/tokens/logos/\").concat(val.token.logo),price:val.price,change:val.price24h&&getPourcentageChangeBetweenTwoNumbers(val.price24h.price,val.price),chain:val.id.chain};});});case 3:return _context5.abrupt(\"return\",_context5.sent);case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function getFavouritesData(){return _ref5.apply(this,arguments);};}();","map":null,"metadata":{},"sourceType":"module"}