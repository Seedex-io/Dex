{"ast":null,"code":"import _objectSpread from\"/workspaces/Dex/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/workspaces/Dex/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/workspaces/Dex/node_modules/@babel/runtime/regenerator/index.js\";import axios from'axios';import{getPourcentageChangeBetweenTwoNumbers}from'../utils/calculate';import{CAPI,API,ORIGIN}from'./constants';import{scanHoneypot}from'./honeyPot';import logo from'../assets/logo.png';export var getInfo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var address,chain,url;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:address=window.location.pathname.split('/')[1].split('-')[0];chain=window.location.pathname.split('/')[1].split('-')[1];url=\"\".concat(API,\"/info?address=\").concat(address,\"&chain=\").concat(chain);return _context2.abrupt(\"return\",axios.get(url).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){var val,publicInfo,honeypot,creationTime;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:val=res.data.pair;_context.next=3;return getPublicInfo(val.baseToken.address,chain);case 3:publicInfo=_context.sent;_context.next=6;return scanHoneypot(val.pairAddress,chain);case 6:honeypot=_context.sent;creationTime=new Date(val.pairCreatedAt).toLocaleDateString(\"en-US\",{year:'numeric',month:'long',day:'numeric'});return _context.abrupt(\"return\",_objectSpread(_objectSpread({},val),{},{honeypot:{BuyTax:honeypot.simulationResult.buyTax,BuyGas:honeypot.simulationResult.buyGas,SellTax:honeypot.simulationResult.sellTax,SellGas:honeypot.simulationResult.sellGas,isHoneypot:honeypot.honeypotResult.isHoneypot},favourite:false,chainId:val.chainId,dexId:val.dexId,url:val.url,labels:val.labels,pairAddress:val.pairAddress,tokenAddress:val.baseToken.address,baseToken:{address:val.baseToken.address,name:val.baseToken.name,symbol:val.baseToken.symbol},quoteToken:{address:val.quoteToken.address,name:val.quoteToken.name,symbol:val.quoteToken.symbol},priceNative:val.priceNative,price:val.priceUsd,txns:{m5:{buys:val.txns.m5.buys,sells:val.txns.m5.sells},h1:{buys:val.txns.h1.buys,sells:val.txns.h1.sells},h6:{buys:val.txns.h6.buys,sells:val.txns.h6.sells},h24:{buys:val.txns.h24.buys,sells:val.txns.h24.sells}},volume:{m5:val.volume.m5,h1:val.volume.h1,h6:val.volume.h6,h24:val.volume.h24},priceChange:{m5:val.priceChange.m5,h1:val.priceChange.h1,h6:val.priceChange.h6,h24:val.priceChange.h24},liquidity:{usd:val.liquidity.usd,base:val.liquidity.base,quote:val.liquidity.quote},fdv:val.fdv,marketCap:val.marketCap,pairCreatedAt:val.pairCreatedAt,price5mChange:val.priceChange.m5,price1hChange:val.priceChange.h1,price6hChange:val.priceChange.h6,price24hChange:val.priceChange.h24,mcap:val.fdv,price24h:val.txns.h24,volume24h:val.volume.h24,reserveRef:val.liquidity.quote,creationTime:creationTime,reserve:val.liquidity.base,chain:'ether'},publicInfo));case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}()).catch(function(err){console.log(err);return null;}));case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function getInfo(){return _ref.apply(this,arguments);};}();export var getPublicInfo=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(tokenAddress,chain){var url,_val$market_data$max_,_val$market_data,_val$market_data$tota,_val$market_data2,_val$market_data$hold,_val$market_data3,_val$market_data$tota2,_val$market_data4,_val$description$en,_val$description,_val$links,_val$market_data$ath,_val$market_data5,_val$market_data$ath_,_val$market_data6,_val$market_data$ath_2,_val$market_data7,_val$market_data$atl,_val$market_data8,_val$market_data$atl_,_val$market_data9,_val$market_data$atl_2,_val$market_data10,_val$image$large,_val$image,_val$audits,res,val;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:url=\"\".concat(CAPI,\"/\").concat(chain,\"/contract/\").concat(tokenAddress);_context3.prev=1;_context3.next=4;return axios.get(url);case 4:res=_context3.sent;val=res.data;return _context3.abrupt(\"return\",{maxSupply:(_val$market_data$max_=(_val$market_data=val.market_data)===null||_val$market_data===void 0?void 0:_val$market_data.max_supply)!==null&&_val$market_data$max_!==void 0?_val$market_data$max_:'N/A',totalSupply:(_val$market_data$tota=(_val$market_data2=val.market_data)===null||_val$market_data2===void 0?void 0:_val$market_data2.total_supply)!==null&&_val$market_data$tota!==void 0?_val$market_data$tota:'N/A',holders:(_val$market_data$hold=(_val$market_data3=val.market_data)===null||_val$market_data3===void 0?void 0:_val$market_data3.holders)!==null&&_val$market_data$hold!==void 0?_val$market_data$hold:'N/A',txCount:(_val$market_data$tota2=(_val$market_data4=val.market_data)===null||_val$market_data4===void 0?void 0:_val$market_data4.total_transactions)!==null&&_val$market_data$tota2!==void 0?_val$market_data$tota2:'N/A',description:(_val$description$en=(_val$description=val.description)===null||_val$description===void 0?void 0:_val$description.en)!==null&&_val$description$en!==void 0?_val$description$en:'No description available',links:(_val$links=val.links)!==null&&_val$links!==void 0?_val$links:{},market_data:{ath:(_val$market_data$ath=(_val$market_data5=val.market_data)===null||_val$market_data5===void 0?void 0:_val$market_data5.ath)!==null&&_val$market_data$ath!==void 0?_val$market_data$ath:{},athChangePercentage:(_val$market_data$ath_=(_val$market_data6=val.market_data)===null||_val$market_data6===void 0?void 0:_val$market_data6.ath_change_percentage)!==null&&_val$market_data$ath_!==void 0?_val$market_data$ath_:{},athDate:(_val$market_data$ath_2=(_val$market_data7=val.market_data)===null||_val$market_data7===void 0?void 0:_val$market_data7.ath_date)!==null&&_val$market_data$ath_2!==void 0?_val$market_data$ath_2:{},atl:(_val$market_data$atl=(_val$market_data8=val.market_data)===null||_val$market_data8===void 0?void 0:_val$market_data8.atl)!==null&&_val$market_data$atl!==void 0?_val$market_data$atl:{},atlChangePercentage:(_val$market_data$atl_=(_val$market_data9=val.market_data)===null||_val$market_data9===void 0?void 0:_val$market_data9.atl_change_percentage)!==null&&_val$market_data$atl_!==void 0?_val$market_data$atl_:{},atlDate:(_val$market_data$atl_2=(_val$market_data10=val.market_data)===null||_val$market_data10===void 0?void 0:_val$market_data10.atl_date)!==null&&_val$market_data$atl_2!==void 0?_val$market_data$atl_2:{}},logo:(_val$image$large=(_val$image=val.image)===null||_val$image===void 0?void 0:_val$image.large)!==null&&_val$image$large!==void 0?_val$image$large:logo,// Set a default image if none is available\naudit:(_val$audits=val.audits)!==null&&_val$audits!==void 0?_val$audits:[]});case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](1);console.error(\"Token info not found in CoinGecko API:\",_context3.t0);// Return default values if token info is not found\nreturn _context3.abrupt(\"return\",{maxSupply:'N/A',totalSupply:'N/A',holders:'N/A',txCount:'N/A',description:'No description available',links:{},market_data:{ath:{},athChangePercentage:{},athDate:{},atl:{},atlChangePercentage:{},atlDate:{}},logo:logo,// A default image path if none is found\naudit:[]});case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[1,9]]);}));return function getPublicInfo(_x2,_x3){return _ref3.apply(this,arguments);};}();{/*export const getPublicInfo = async (tokenAddress: any, chain: any) => {\r\n  const url = `${API}/publicInfo?tokenAddress=${tokenAddress}&chain=${chain}`;\r\n\r\n  return axios\r\n    .get(url)\r\n    .then(async (res: any) => {\r\n      const val = res.data.data;\r\n      console.log(val);\r\n\r\n      return {\r\n        maxSupply: val.metrics.maxSupply,\r\n        totalSupply: val.metrics.totalSupply,\r\n        holders: val.metrics.holders,\r\n        txCount: val.metrics.txCount,\r\n        description: val.info.description,\r\n        links: val.links,\r\n        logo: val.logo ? `https://www.dextools.io/resources/tokens/logos/${val.logo}` : null,\r\n        audit: val.audit,\r\n      };\r\n    })\r\n    .catch((err: any) => {\r\n      console.log(err);\r\n      return null;\r\n    });\r\n}; */}export var checkFavourite=function checkFavourite(address){var favourites=JSON.parse(localStorage.getItem('favourites')||'[]');return favourites.includes(address);};export var addFavourite=function addFavourite(address){var favourites=JSON.parse(localStorage.getItem('favourites')||'[]');favourites.push(address);localStorage.setItem('favourites',JSON.stringify(favourites));};export var removeFavourite=function removeFavourite(address){var favourites=JSON.parse(localStorage.getItem('favourites')||'[]');favourites=favourites.filter(function(f){return f!==address;});localStorage.setItem('favourites',JSON.stringify(favourites));};var getFavourites=function getFavourites(){var favourites=JSON.parse(localStorage.getItem('favourites')||'[]');return favourites;};export var getFavouritesData=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var url;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:url=\"\".concat(API,\"/favourites\");_context4.next=3;return axios.post(url,{favourites:getFavourites()}).then(function(res){return res.data.map(function(val){return{symbol:val.symbol,symbolRef:val.symbolRef,pair:val.id.pair,logo:\"\".concat(ORIGIN,\"/raw?url=https://www.dextools.io/resources/tokens/logos/\").concat(val.token.logo),price:val.price,change:val.price24h&&getPourcentageChangeBetweenTwoNumbers(val.price24h.price,val.price),chain:val.id.chain};});});case 3:return _context4.abrupt(\"return\",_context4.sent);case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function getFavouritesData(){return _ref4.apply(this,arguments);};}();","map":null,"metadata":{},"sourceType":"module"}